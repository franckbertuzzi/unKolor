---
// Statistics
// ------------
// Description: A statistics section with a title, a subtitle, a description and a grid of statistics
// Properties:
// - title: The title of the statistics section
// - text: The subtitle of the statistics section

// Components
// - Layout
import Section from '../../ui/Section.astro'
import Row from '../../ui/Row.astro'
import Col from '../../ui/Col.astro'

//Content
// - Data
const currentLocale = Astro.currentLocale || 'en'
const localePath = currentLocale === 'fr' ? 'fr' : 'en'
const { default: statsData } = await import(`../../../data/json-files/${localePath}/statsData.json`)

// - Props
type Props = {
	title?: string
	text?: string
}
const defaultTitle = currentLocale === 'fr' ? 'Estad√≠sticas' : 'Statistics'
const { title = defaultTitle, text = '' } = Astro.props
---

<Section decoration="all" type="alt" classes="p-0!">
	{
		text && (
			<Row classes="pt-10 lg:pt-20">
				<Col span="12">
					<h2 class="sr-only">{title}</h2>
					{text && (
						<p
							class="text-xl leading-12 font-light lg:text-center lg:text-3xl [&_strong]:font-semibold"
							set:html={text}
						/>
					)}
				</Col>
			</Row>
		)
	}

	<Row classes="gap-0!">
		{
			statsData.map(({ number, suffix, title, description }: any, index: any) => (
				<Col classes="relative col-span-12 before:absolute before:bottom-0 before:h-px before:w-full before:bg-linear-to-r before:from-stone-200/0 before:via-stone-200 before:to-stone-200/0 after:absolute after:top-0 after:right-0 after:hidden after:h-full after:w-px after:bg-linear-to-b after:from-stone-200/0 after:via-stone-200 after:to-stone-200/0 last:after:hidden lg:col-span-3 lg:before:hidden lg:after:block dark:before:from-neutral-800/0 dark:before:via-neutral-800 dark:before:to-neutral-800/0 dark:after:from-neutral-700/0 dark:after:via-neutral-800 dark:after:to-neutral-800/0">
					<div class="flex h-full flex-col gap-6 py-[40px] lg:gap-12 lg:px-7.5 lg:py-[80px]">
						<span
							class="counter h3 mb-0! text-6xl! leading-none! lg:text-7xl!"
							data-target={number}
							data-suffix={suffix}
						>
							0
						</span>
						<div class="flex flex-col gap-2">
							<span class="h4 text-2xl! lg:text-3xl! lg:leading-9!">{title}</span>
							<p>{description}</p>
						</div>
					</div>
				</Col>
			))
		}
	</Row>
</Section>
