---
// Input field
// ------------
// Description: The component for the basic form input field
// Properties:
// - id: The id of the input field
// - type: The type of the input field (text, email, password, tel)
// - label: The label of the input field
// - iconName: The name of the icon to be displayed (optional)
// - iconPosition: The position of the icon (lead or trail)
// - helperText: The helper text to be displayed
// - required: Whether the input field is required
// - disabled: Whether the input field is disabled
// - value: The value of the input field
// - classes: Additional classes to be added to the input field
// - inputClasses: Additional classes to be added to the input field
// - labelClasses: Additional classes to be added to the label

// Components
// - UI
import Decorations from '../../Decor.astro'

// Props
type Props = {
	id: string
	type?: 'text' | 'email' | 'password' | 'tel'
	label: string
	iconPosition?: 'lead' | 'trail'
	helperText?: string
	required?: boolean
	disabled?: boolean
	value?: string
	decoration?: string
	classes?: string
	inputClasses?: string
	labelClasses?: string
}
const {
	type = 'text',
	id,
	label,
	iconPosition,
	helperText,
	required,
	disabled,
	value,
	decoration = 'top-left bottom-right',
	classes,
	inputClasses,
	labelClasses
} = Astro.props
---

<div
	class:list={[
		'input',
		{ ['input--icon-' + `${iconPosition}`]: iconPosition },
		,
		{ [`${classes}`]: classes }
	]}
>
	<label for={id} class:list={['input__label', { [`${labelClasses}`]: labelClasses }]}>
		{label}
	</label>
	<div class="relative">
		<input
			id={id}
			type={type}
			name={id}
			placeholder={label}
			required={required}
			disabled={disabled}
			value={value}
			class:list={['input__field peer', { [`${inputClasses}`]: inputClasses }]}
		/>
		{decoration !== 'none' && <Decorations type={decoration} size="sm" />}
	</div>

	{
		helperText && (
			<small class="input__helper-text">
				<span> {helperText} </span>
			</small>
		)
	}
</div>

<style>
	@reference '../../../../styles/global.css';
	.input {
		@apply relative w-full;
	}
	.input__field {
		@apply relative mb-0 h-14 w-full border border-neutral-100 px-4 text-neutral-700 placeholder-transparent transition-all outline-none autofill:bg-white invalid:border-red-500 invalid:text-red-500 focus:bg-neutral-50 focus:outline-none invalid:focus:border-red-500 focus-visible:outline-none disabled:cursor-not-allowed disabled:bg-neutral-50 disabled:text-neutral-400 dark:border-neutral-800 dark:bg-neutral-900 dark:text-neutral-400 dark:autofill:bg-neutral-900 dark:focus:bg-neutral-950 dark:disabled:bg-neutral-600;
	}
	.input__label {
		@apply font-headings inline-block pb-2 pl-2 text-sm;
	}
	.input__helper-text {
		@apply absolute bottom-0 flex w-full justify-between px-4 py-1 text-xs text-neutral-400 transition peer-invalid:text-red-500;
	}
</style>
