---
// Kursor
// ------------
// Description: A cursor animation script that makes your cursor look like a play button
---

<!-- Load the Kursor script -->
<script src="https://cdn.jsdelivr.net/npm/kursor" is:inline></script>
<script is:inline>
	function initializeCursor() {
		// Only initialize if not on a touch device
		if (!('ontouchstart' in window)) {
			new kursor({
				type: 4,
				color: '#ff5500',
				el: '.animate-cursor'
			})
		}
	}

	// Run on initial page load
	document.addEventListener('DOMContentLoaded', initializeCursor)
	// Re-run on Astro client-side navigation
	document.addEventListener('astro:page-loaded', initializeCursor)
	document.addEventListener('astro:after-swap', initializeCursor)
</script>

<style is:inline>
	.notCursor {
		cursor: none;
	}
	.notCursor * {
		cursor: none;
	}
	#kursorWrapper {
		position: fixed;
		z-index: 99;
		overflow: hidden;
		pointer-events: none;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		overflow: hidden;
		will-change: transform;
	}
	div[class*='kursor'] {
		position: fixed;
		pointer-events: none;
		transform: translate(-50%, -50%);
		z-index: 10000;
	}
	div[class*='kursor'].kursor--hidden {
		opacity: 0;
		width: 0px;
		height: 0px;
	}

	div[class*='kursor'].kursor--4 {
		left: 0px;
		top: 0px;
		width: 72px;
		height: 72px;
		border: 1px solid #f3f4f6;
		border-radius: 50%;
		background: rgba(255, 255, 255, 0.5);
		/* backdrop-filter: blur(3px); */
		transition:
			all 0.2s ease,
			top 0.2s ease-out,
			left 0.2s ease-out;
		will-change: transform;
	}
	div[class*='kursor'].kursor--4 + .kursorChild {
		display: block;
		background-image: url(/cursors/cursor-play.webp);
		width: 24px;
		height: 24px;
		background-size: cover;
		transition:
			all 0.2s ease,
			top 0.03s ease-out,
			left 0.03s ease-out;
		will-change: transform;
	}
	div[class*='kursor'].kursor--4.--hover {
		width: 30px;
		height: 30px;
		background: rgba(var(--k-color), 0.1);
		border: 3px solid rgba(var(--k-color), 0);
	}
	div[class*='kursor'].kursor--4.--hover + .kursorChild {
		width: 25px;
		height: 25px;
		background: rgba(var(--k-color), 0.1);
	}
	div[class*='kursor'].kursor--4.kursor--down {
		width: 5px;
		height: 5px;
	}
	div[class*='kursor'].kursor--4.kursor--down + .kursorChild {
		width: 10px;
		height: 10px;
	}
	div[class*='kursor'].kursor--4.kursor--down + .kursorChild:after {
		width: 40px !important;
		height: 40px !important;
		opacity: 0;
		border-radius: 50%;
		border: 1px solid;
		border-color: rgba(var(--k-color), 1);
		transition: all 0.4s ease;
	}

	div[class*='kursorChild'] {
		position: fixed;
		pointer-events: none;
		transform: translate(-50%, -50%);
		display: none;
		overflow: hidden;
	}
	div[class*='kursorChild'].kursorChild[class*='--hidden'] {
		opacity: 0;
		width: 0px;
		height: 0px;
	}
	div[class*='kursorChild'].kursorChild:after {
		content: '';
		pointer-events: none;
		width: 0px;
		height: 0px;
		position: absolute;
		left: 50%;
		top: 50%;
		opacity: 1;
		border: 0px solid rgba(var(--k-color), 0.5);
		transform: translate(-50%, -50%);
	}
	.kursor--absolute {
		position: absolute !important;
		z-index: 2000;
	}
	@media screen and (max-width: 768px) {
		.notCursor * {
			cursor: auto;
		}
		div[class*='kursor'] {
			display: none !important;
		}
		div[class*='kursorChild'] {
			display: none !important;
		}
	}
	@media screen and (max-width: 812px) and (max-height: 430px) and (orientation: landscape) {
		div[class*='kursor'] {
			display: none !important;
		}
		div[class*='kursorChild'] {
			display: none !important;
		}
		.notCursor * {
			cursor: auto;
		}
	}
</style>
